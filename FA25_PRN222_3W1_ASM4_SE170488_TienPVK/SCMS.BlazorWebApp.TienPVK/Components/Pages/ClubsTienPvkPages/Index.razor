@page "/clubstienpvks"
@using Microsoft.EntityFrameworkCore
@using Microsoft.AspNetCore.Components.QuickGrid
@using SCMS.Domain.TienPVK.Models
@using SCMS.Repository.TienPVK.DBContext
@using SCMS.Service.TienPVK.Implements
@* @implements IAsyncDisposable *@
@inject ClubsTienPvkService _service;

<PageTitle>Index</PageTitle>

<h1>Index</h1>

<p>
    <a href="clubstienpvks/create">Create New</a>
</p>

<QuickGrid Class="table" Items="context.ClubsTienPvks">
    <PropertyColumn Property="clubstienpvk => clubstienpvk.ClubCode" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.ClubName" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.CategoryIdtienPvk" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.Description" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.FoundedDate" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.Email" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.Phone" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.Address" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.ManagerUserId" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.MemberLimit" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.IsOpenToJoin" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.RequiresApproval" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.Status" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.CreatedAt" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.CreatedBy" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.ModifiedBy" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.ModifiedAt" />
    <PropertyColumn Property="clubstienpvk => clubstienpvk.IsDeleted" />

    <TemplateColumn Context="clubstienpvk">
        <a href="@($"clubstienpvks/edit?clubidtienpvk={clubstienpvk.ClubIdtienPvk}")">Edit</a> |
        <a href="@($"clubstienpvks/details?clubidtienpvk={clubstienpvk.ClubIdtienPvk}")">Details</a> |
        <a href="@($"clubstienpvks/delete?clubidtienpvk={clubstienpvk.ClubIdtienPvk}")">Delete</a>
    </TemplateColumn>
</QuickGrid>

@code {
    private FA25_PRN222_3W_PRN222_01_G5_SCMSDbContext context = default!;

    protected override async Task OnInitialized()
    {
        await LoadClubs();
    }

    private async Task LoadClubs ()
    {
        context = await _service.GetAllAsync();
    }

    public async ValueTask DisposeAsync() => await context.DisposeAsync();
}
